---
const {
	phone = "5491123456789",
	message = "¡Hola! Quería hacer una consulta.",
	position = "right",
} = Astro.props;

const encodedMsg = encodeURIComponent(message);
const href = `https://wa.me/${phone}?text=${encodedMsg}`;

const sideClass = position === "left" ? "left: 18px;" : "right: 18px;";
---

<a
	class="wa-float"
	href={href}
	target="_blank"
	rel="noopener noreferrer"
	aria-label="Abrir chat de WhatsApp"
	title="WhatsApp"
	style={sideClass}
>
	<img src="/images/logowpp.webp" alt="" loading="lazy" decoding="async" />
</a>

<style>
	.wa-float {
		position: fixed;
		bottom: 18px;
		right: 18px;
		z-index: 60;
		width: 4.5rem;
		height: 4.5rem;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		background: transparent;
		box-shadow: 0 10px 24px rgba(0, 0, 0, 0.22);
		transition:
			transform 0.15s ease,
			box-shadow 0.15s ease,
			filter 0.15s ease;
		text-decoration: none;
	}
	.wa-float:hover {
		transform: translateY(-2px);
		box-shadow: 0 14px 30px rgba(0, 0, 0, 0.26);
		filter: brightness(1.02);
	}
	.wa-float:active {
		transform: translateY(0);
	}
	.wa-float img {
		width: 100%;
		height: 100%;
		object-fit: contain;
		display: block;
		pointer-events: none;
	}

	@media (prefers-reduced-motion: reduce) {
		.wa-float {
			transition: none;
		}
	}
	@keyframes wa-breathe {
		0% {
			transform: scale(1);
			box-shadow: 0 10px 24px rgba(0, 0, 0, 0.22);
		}
		50% {
			transform: scale(1.06);
			box-shadow: 0 14px 32px rgba(0, 0, 0, 0.28);
		}
		100% {
			transform: scale(1);
			box-shadow: 0 10px 24px rgba(0, 0, 0, 0.22);
		}
	}

	.wa-float {
		animation: wa-breathe 2.8s ease-in-out infinite;
	}
	@keyframes wa-bounce {
		0%,
		100% {
			transform: translateY(0);
		}
		50% {
			transform: translateY(-6px);
		}
	}

	.wa-float {
		animation: wa-bounce 2.4s ease-in-out infinite;
	}
	.wa-float {
		animation: wa-breathe 3s ease-in-out infinite;
	}

	.wa-float:hover {
		animation: wa-bounce 0.6s ease-in-out;
	}
</style>
