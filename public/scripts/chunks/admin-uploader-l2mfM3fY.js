import{a as f,j as u}from"./api-gnd9IJTx.js";function b(r="status",e){const a=(e==null?void 0:e.okMs)??1600,o=(e==null?void 0:e.errMs)??5e3,t=document.getElementById(r);let n=null;function s(c,d="",m){if(!t)return;t.textContent=c,t.className=`status show ${d}`,n&&window.clearTimeout(n);const l=m??(d==="err"?o:a);l>0&&(n=window.setTimeout(i,l))}function i(){t&&(t.className="status",t.textContent="")}return{show:s,clear:i}}async function y(r){const e=await f("/v1/media/sign",r);return u(e)}async function v(r,e){const a=e.resourceType||"image",o=`https://api.cloudinary.com/v1_1/${e.cloudName}/${a}/upload`,t=new FormData;t.append("file",r),t.append("api_key",String(e.apiKey)),t.append("timestamp",String(e.timestamp)),t.append("signature",String(e.signature)),e.folder&&t.append("folder",String(e.folder)),e.publicId&&t.append("public_id",String(e.publicId)),e.transformation&&t.append("transformation",String(e.transformation)),e.eager&&t.append("eager",e.eager);const n=await fetch(o,{method:"POST",body:t});if(!n.ok)throw new Error(`Error subiendo a Cloudinary (${n.status})`);return n.json()}function w(r,e="Dato invÃ¡lido"){if(!r)return;r.classList.add("is-invalid","invalid"),r.setAttribute("aria-invalid","true");const a=r.closest("label")||r.parentElement;a==null||a.querySelectorAll(".err-tip").forEach(i=>i.remove());const o=document.createElement("small");o.className="err-tip",o.role="alert",o.textContent=e;const t=`${r.id||"field"}-err`;o.id=t;const n=r.getAttribute("aria-describedby"),s=n?new Set(n.split(" ").filter(Boolean)):new Set;s.add(t),r.setAttribute("aria-describedby",Array.from(s).join(" ")),(a||r.parentElement||r).appendChild(o)}function h(r){var t,n;if(!r)return;r.classList.remove("is-invalid","invalid");const e=r.closest("label")||r.parentElement,a=(t=e==null?void 0:e.querySelector)==null?void 0:t.call(e,".err-tip");if(a){const s=a.id||`${r.id||"field"}-err`;a.remove();const i=r.getAttribute("aria-describedby");if(i){const c=i.split(" ").filter(d=>d&&d!==s);c.length?r.setAttribute("aria-describedby",c.join(" ")):r.removeAttribute("aria-describedby")}}((n=e||r.parentElement)==null?void 0:n.querySelector(".err-tip"))||r.removeAttribute("aria-invalid")}function S(r){r&&(r.value="")}function E(r,e=10){if(!/^image\//.test(r.type))throw new Error("Formato no soportado");if(r.size/(1024*1024)>e)throw new Error(`La imagen supera ${e}MB`)}export{E as a,h as b,S as c,b as d,w as m,y as r,v as u};
//# sourceMappingURL=admin-uploader-l2mfM3fY.js.map
